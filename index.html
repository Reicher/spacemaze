<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="format-detection" content="telephone=no"/>
	<meta name="viewport" content="user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width,height=device-height"/>

	<!-- third party js -->
	<script type="text/javascript" src="cordova.js"      ></script>
	<script type="text/javascript" src="js/lib/phaser.js"></script>

	<!-- local js -->
	<script type="text/javascript">
		var
			game,	map, layer,
			vel_x, vel_y;

		document.addEventListener( 'deviceready', onDeviceReady, false);

		function onDeviceReady() {
			game = new Phaser.Game(
				window.width,
				window.height,
				Phaser.CANVAS,
				'spacemaze',
				{
					preload : preload,
					create  : create,
					update  : update,
					render  : render
				}
			);

			navigator.accelerometer.watchAcceleration(
				function ( acceleration ) { // Success
					vel_x = acceleration.x * 2;
					vel_y = acceleration.y * 2;
				},
				function () { // Error
					alert( 'Error!' );
				},
				{ frequency : 100 }
			);
		}

		function preload() {
			game.load.tilemap( 'map', 'tilemaps/level_1.csv', null, Phaser.Tilemap.CSV );
			game.load.image( 'tiles', 'tilemaps/tiles.png' );
		}

		function create() {
			map = game.add.tilemap( 'map', 63, 63 );
			map.addTilesetImage( 'tiles' );
			layer = map.createLayer( 0 );
			layer.resizeWorld();
		}

		function update() {
			game.camera.x -= vel_x;
			game.camera.y += vel_y;
		}

		function render() {}
	</script>
</head>
<body>
	<div id="spacemaze"></div>
</body>
</html>